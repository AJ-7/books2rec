<html>
<head>
    <title>Book Recommendations</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style type="text/css" media="screen">
        .page {
            width: 100%;
        }
        .jumbo_header {
            padding-left: 25px;
        }
        .row {
            width: 100%;
            display: flex;
            flex-direction: row;
            align-self: center;
        }
        .col {
            display: flex;
            flex-direction: column;
        }
        .input_container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-content: center;

            padding: 10px;
        }
        .book_container {
            height: 33vh;
            margin: 5px;
            border-style: solid;
            border-color: teal;
            border-width: 2px;
            border-radius: 5px;

            display: flex;
            flex-direction: column;
            align-content: center;
            align-items: center;
        }
        .book_cover{
            margin-top: 5px;
            height: 55%;
        }
        .book_rank {
            height: 10%;
            width: 100%;
            padding-left: 10px;
            background-color: teal;

            display: flex;
            flex-direction: row;
            align-content: center;
            align-items: center;

            font-size: 1.5vh;
        }
        .book_info {
            height: 20%;
            padding: 10px;
            text-align: center;

            display: flex;
            flex-direction: column;
            align-content: center;
            align-items: center;

            font-size: 1.5vmin;
        }
        .response {
            display: flex;
            flex-direction: column;
            align-content: center;
            align-items: center;  
        }
        h4 {
            font-size: 2vmin;
            margin: 0;
        }
        h2 {
            font-size: 3.5vmin;
        }
        p {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="jumbotron">
        <div class="jumbo_header">
            <h1>Book Recommendations</h1>     
        </div>
    </div>
    <div class="page">
        <div class="container">
            <div class="response">
                <h2>Choose from multiple ways to get recommendations below</h2>
            </div>
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">Give me recommendations based on my Goodreads profile</a>
                        </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse">
                        <div class="input_container">
                            <p><strong>Note:</strong> You must have a Goodreads account to use this feature. Also, if you want to input your username, your 
                            <strong>MUST</strong> manually set it in the edit profile page in Goodreads. Otherwise, you can just copy the User ID
                            that is in the url of your profile page</p>
                            <form method="POST">
                                <input name="text" placeholder="Goodreads Username or ID">
                                <input type="submit" name='user_recs' value="Get Recommendations">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">I just want recommendations based a specific book I like</a>
                        </h4>
                    </div>
                    <div id="collapse2" class="panel-collapse collapse">
                        <div class="input_container">
                            <form method="POST">
                                <input list="book_drop" name="books" placeholder="Search by Title">
                                <datalist id="book_drop" name="books">
                                    {% for title in titles %}
                                    <option value="{{title}}">
                                    {% endfor %}
                                </datalist>
                                <input type="submit" name='book_recs' value="Get Recommendations">
                            </form>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">I just want books that are similar to a book I like</a>
                        </h4>
                    </div>
                    <div id="collapse3" class="panel-collapse collapse">
                        <div class="input_container">
                            <form method="POST">
                                <input list="book_drop" name="books" placeholder="Search by Title">
                                <datalist id="book_drop" name="books">
                                    {% for title in titles %}
                                    <option value="{{title}}">
                                    {% endfor %}
                                </datalist>
                                <input type="submit" name='book_similar' value="Get Simlar Books">
                            </form>
                        </div>
                    </div>
                </div>
            </div> 
        </div>
        <div class="response">
            <h2>{{response}}</h2>
        </div>
        <div class="col">
            <!-- you can iterate on a list to add many items -->
            {% for chunk in toPass %}
            <div class="row">
                {% for book in chunk %}
                <div class="col-sm-4">
                    <div class="book_container">
                        <div class="book_rank">
                            <p style="color: white">Rank: {{book['rank']}}</p>
                        </div>
                        <div class="book_cover" >
                            <a href={{book['url']}}><img style="height: 100%;" border="0" src={{book['image_url']}} /></a>
                        </div>
                        <div class="book_info">
                            <h4>{{book['title']}}</h4>
                            <p>By: {{book['author']}}</p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>

